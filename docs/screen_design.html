<!DOCTYPE html>
<html>
<head>
<title>screen_design.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%E7%94%BB%E9%9D%A2%E8%A8%AD%E8%A8%88%E6%9B%B8">画面設計書</h1>
<h2 id="1-%E6%A6%82%E8%A6%81">1. 概要</h2>
<p>学食メニュー満足度アプリの画面設計書です。本アプリケーションは全6画面で構成され、ユーザー認証、メニュー閲覧、レビュー投稿、データ分析の機能を提供します。</p>
<h2 id="2-%E7%94%BB%E9%9D%A2%E4%B8%80%E8%A6%A7">2. 画面一覧</h2>
<table>
<thead>
<tr>
<th>画面ID</th>
<th>画面名</th>
<th>URL</th>
<th>認証</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SC-01</td>
<td>ログイン画面</td>
<td><code>/login</code></td>
<td>不要</td>
<td>ユーザーログイン</td>
</tr>
<tr>
<td>SC-02</td>
<td>ユーザー登録画面</td>
<td><code>/register</code></td>
<td>不要</td>
<td>新規ユーザー登録</td>
</tr>
<tr>
<td>SC-03</td>
<td>メニュー一覧画面</td>
<td><code>/</code></td>
<td>必要</td>
<td>メニューの一覧表示</td>
</tr>
<tr>
<td>SC-04</td>
<td>メニュー詳細画面</td>
<td><code>/menus/&lt;id&gt;</code></td>
<td>必要</td>
<td>メニュー詳細とレビュー表示</td>
</tr>
<tr>
<td>SC-05</td>
<td>レビュー投稿・編集画面</td>
<td><code>/menus/&lt;id&gt;/review</code></td>
<td>必要</td>
<td>レビューの投稿・編集</td>
</tr>
<tr>
<td>SC-06</td>
<td>データ分析画面</td>
<td><code>/analysis</code></td>
<td>必要</td>
<td>レビューデータの可視化</td>
</tr>
</tbody>
</table>
<h2 id="3-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E5%9B%B3">3. 画面遷移図</h2>
<pre><code class="language-mermaid"><div class="mermaid">stateDiagram
    [*] --> ログイン画面
    ログイン画面 --> ユーザー登録画面: 登録リンク
    ユーザー登録画面 --> ログイン画面: 登録完了/ログインリンク
    ログイン画面 --> メニュー一覧画面: ログイン成功
    
    メニュー一覧画面 --> メニュー詳細画面: 詳細リンク
    メニュー一覧画面 --> データ分析画面: データ分析リンク
    メニュー一覧画面 --> ログイン画面: ログアウト
    
    メニュー詳細画面 --> メニュー一覧画面: 一覧に戻る
    メニュー詳細画面 --> レビュー投稿・編集画面: レビュー投稿/編集
    
    レビュー投稿・編集画面 --> メニュー詳細画面: 投稿完了/戻る
    
    データ分析画面 --> メニュー一覧画面: 一覧に戻る
    データ分析画面 --> ログイン画面: ログアウト
</div></code></pre>
<h2 id="4-%E7%94%BB%E9%9D%A2%E3%83%95%E3%83%AD%E3%83%BC%E5%9B%B3">4. 画面フロー図</h2>
<pre><code class="language-mermaid"><div class="mermaid">flowchart TD
    A[ログイン画面] -->|ログイン成功| B[メニュー一覧画面]
    A -->|登録リンク| C[ユーザー登録画面]
    C -->|登録完了| A
    
    B -->|詳細リンク| D[メニュー詳細画面]
    B -->|データ分析| E[データ分析画面]
    B -->|ログアウト| A
    
    D -->|レビュー投稿/編集| F[レビュー投稿・編集画面]
    D -->|戻る| B
    
    F -->|投稿完了| D
    F -->|キャンセル| D
    
    E -->|戻る| B
    E -->|ログアウト| A
    
    style A fill:#ffcccc
    style B fill:#ccffcc
    style C fill:#ffcccc
    style D fill:#ccffcc
    style E fill:#ccccff
    style F fill:#ffffcc
</div></code></pre>
<h2 id="5-%E7%94%BB%E9%9D%A2%E8%A9%B3%E7%B4%B0%E8%A8%AD%E8%A8%88">5. 画面詳細設計</h2>
<h3 id="sc-01-%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E7%94%BB%E9%9D%A2">SC-01: ログイン画面</h3>
<h4 id="511-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.1.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/login</code></li>
<li><strong>メソッド</strong>: GET, POST</li>
<li><strong>認証</strong>: 不要</li>
<li><strong>目的</strong>: ユーザー認証を行い、システムへのアクセスを許可する</li>
</ul>
<h4 id="512-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.1.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------+
|  学食メニュー満足度アプリ                  |
+------------------------------------------+
|                                          |
|           ログイン                        |
|                                          |
|  ユーザー名: [________________]          |
|                                          |
|  パスワード: [________________]          |
|                                          |
|         [ ログイン ]                     |
|                                          |
|  ユーザー登録                             |
|                                          |
+------------------------------------------+
</div></code></pre>
<h4 id="513-%E5%85%A5%E5%8A%9B%E9%A0%85%E7%9B%AE">5.1.3 入力項目</h4>
<table>
<thead>
<tr>
<th>項目名</th>
<th>必須</th>
<th>型</th>
<th>制約</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>◯</td>
<td>text</td>
<td>最大100文字</td>
<td>ユーザー名</td>
</tr>
<tr>
<td>password</td>
<td>◯</td>
<td>password</td>
<td>-</td>
<td>パスワード（非表示）</td>
</tr>
</tbody>
</table>
<h4 id="514-%E5%8B%95%E4%BD%9C">5.1.4 動作</h4>
<p><strong>GET:</strong></p>
<ul>
<li>ログインフォームを表示</li>
<li>既にログイン済みの場合はメニュー一覧へリダイレクト（オプション）</li>
</ul>
<p><strong>POST:</strong></p>
<ol>
<li>ユーザー名とパスワードを受け取る</li>
<li>データベースでユーザーを検索</li>
<li>パスワードのハッシュ値を検証</li>
<li>認証成功 → セッションに <code>user_id</code> を保存し、メニュー一覧画面へ遷移</li>
<li>認証失敗 → エラーメッセージを表示</li>
</ol>
<h4 id="515-%E3%82%A8%E3%83%A9%E3%83%BC%E5%87%A6%E7%90%86">5.1.5 エラー処理</h4>
<table>
<thead>
<tr>
<th>エラー内容</th>
<th>メッセージ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ユーザー名またはパスワードが不正</td>
<td>「ユーザー名またはパスワードが正しくありません」</td>
</tr>
<tr>
<td>入力項目が空</td>
<td>「全ての項目を入力してください」</td>
</tr>
</tbody>
</table>
<h4 id="516-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.1.6 画面遷移</h4>
<ul>
<li><strong>ユーザー登録リンク</strong> → ユーザー登録画面（SC-02）</li>
<li><strong>ログイン成功</strong> → メニュー一覧画面（SC-03）</li>
</ul>
<hr>
<h3 id="sc-02-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E7%99%BB%E9%8C%B2%E7%94%BB%E9%9D%A2">SC-02: ユーザー登録画面</h3>
<h4 id="521-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.2.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/register</code></li>
<li><strong>メソッド</strong>: GET, POST</li>
<li><strong>認証</strong>: 不要</li>
<li><strong>目的</strong>: 新規ユーザーアカウントを作成する</li>
</ul>
<h4 id="522-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.2.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------+
|  学食メニュー満足度アプリ                  |
+------------------------------------------+
|                                          |
|         ユーザー登録                      |
|                                          |
|  ユーザー名: [________________]          |
|                                          |
|  パスワード: [________________]          |
|                                          |
|           [ 登録 ]                       |
|                                          |
|  ログイン                                 |
|                                          |
+------------------------------------------+
</div></code></pre>
<h4 id="523-%E5%85%A5%E5%8A%9B%E9%A0%85%E7%9B%AE">5.2.3 入力項目</h4>
<table>
<thead>
<tr>
<th>項目名</th>
<th>必須</th>
<th>型</th>
<th>制約</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>◯</td>
<td>text</td>
<td>最大100文字、一意</td>
<td>ユーザー名</td>
</tr>
<tr>
<td>password</td>
<td>◯</td>
<td>password</td>
<td>-</td>
<td>パスワード（非表示）</td>
</tr>
</tbody>
</table>
<h4 id="524-%E5%8B%95%E4%BD%9C">5.2.4 動作</h4>
<p><strong>GET:</strong></p>
<ul>
<li>ユーザー登録フォームを表示</li>
</ul>
<p><strong>POST:</strong></p>
<ol>
<li>ユーザー名とパスワードを受け取る</li>
<li>ユーザー名の重複チェック</li>
<li>パスワードをハッシュ化</li>
<li>新規ユーザーをデータベースに登録</li>
<li>登録成功 → ログイン画面へ遷移</li>
<li>登録失敗 → エラーメッセージを表示</li>
</ol>
<h4 id="525-%E3%83%90%E3%83%AA%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">5.2.5 バリデーション</h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>チェック内容</th>
<th>エラーメッセージ</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>空欄チェック</td>
<td>「全ての項目を入力してください」</td>
</tr>
<tr>
<td>username</td>
<td>重複チェック</td>
<td>「そのユーザー名は既に使用されています」</td>
</tr>
<tr>
<td>password</td>
<td>空欄チェック</td>
<td>「全ての項目を入力してください」</td>
</tr>
</tbody>
</table>
<h4 id="526-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.2.6 画面遷移</h4>
<ul>
<li><strong>ログインリンク</strong> → ログイン画面（SC-01）</li>
<li><strong>登録成功</strong> → ログイン画面（SC-01）</li>
</ul>
<hr>
<h3 id="sc-03-%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E4%B8%80%E8%A6%A7%E7%94%BB%E9%9D%A2">SC-03: メニュー一覧画面</h3>
<h4 id="531-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.3.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/</code></li>
<li><strong>メソッド</strong>: GET</li>
<li><strong>認証</strong>: 必要</li>
<li><strong>目的</strong>: 学食メニューの一覧を表示し、詳細画面への入り口を提供する</li>
</ul>
<h4 id="532-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.3.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------------------+
|  学食メニュー満足度アプリ                              |
|  ログイン中: ユーザー名                                |
+------------------------------------------------------+
|  [メニュー一覧] [データ分析] [ログアウト]              |
+------------------------------------------------------+
|  メニュー一覧                                         |
|                                                      |
|  カテゴリ                                             |
|  ・定食 ・丼もの ・麺類 ・カレー ・軽食 ・デザート     |
|                                                      |
|  +------------------------------------------------+  |
|  |メニュー名     |カテゴリ|価格|評価|件数|詳細    |  |
|  +------------------------------------------------+  |
|  |唐揚げ定食     |定食    |500 |4.5 |10  |[詳細] |  |
|  |カレーライス   |カレー  |400 |4.2 |8   |[詳細] |  |
|  |ラーメン       |麺類    |450 |4.0 |5   |[詳細] |  |
|  +------------------------------------------------+  |
|                                                      |
+------------------------------------------------------+
</div></code></pre>
<h4 id="533-%E8%A1%A8%E7%A4%BA%E9%A0%85%E7%9B%AE">5.3.3 表示項目</h4>
<p><strong>ナビゲーション:</strong></p>
<ul>
<li>ログイン中のユーザー名</li>
<li>メニュー一覧リンク（現在のページ）</li>
<li>データ分析リンク</li>
<li>ログアウトリンク</li>
</ul>
<p><strong>カテゴリ一覧:</strong></p>
<ul>
<li>データベースに登録された全カテゴリを表示</li>
</ul>
<p><strong>メニュー一覧テーブル:</strong></p>
<table>
<thead>
<tr>
<th>カラム</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>メニュー名</td>
<td>メニューの名前</td>
</tr>
<tr>
<td>カテゴリ</td>
<td>所属カテゴリ名</td>
</tr>
<tr>
<td>価格</td>
<td>価格（円）</td>
</tr>
<tr>
<td>平均評価</td>
<td>レビューの平均評価（0-5.0、小数点1桁）</td>
</tr>
<tr>
<td>レビュー数</td>
<td>レビュー件数</td>
</tr>
<tr>
<td>詳細</td>
<td>メニュー詳細画面へのリンク</td>
</tr>
</tbody>
</table>
<h4 id="534-%E5%8B%95%E4%BD%9C">5.3.4 動作</h4>
<ol>
<li>セッションから <code>user_id</code> を取得</li>
<li>ログインチェック（未ログインの場合はログイン画面へリダイレクト）</li>
<li>提供中のメニュー（<code>is_available = TRUE</code>）を全て取得</li>
<li>各メニューの平均評価とレビュー数を計算</li>
<li>カテゴリ一覧を取得</li>
<li>データを画面に表示</li>
</ol>
<h4 id="535-%E8%A8%88%E7%AE%97%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF">5.3.5 計算ロジック</h4>
<p><strong>平均評価:</strong></p>
<pre class="hljs"><code><div>reviews = Review.query.filter_by(menu_id=menu.id).all()
<span class="hljs-keyword">if</span> reviews:
    avg_rating = sum(r.rating <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> reviews) / len(reviews)
    avg_rating = round(avg_rating, <span class="hljs-number">1</span>)
<span class="hljs-keyword">else</span>:
    avg_rating = <span class="hljs-number">0</span>
</div></code></pre>
<h4 id="536-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.3.6 画面遷移</h4>
<ul>
<li><strong>詳細リンク</strong> → メニュー詳細画面（SC-04）</li>
<li><strong>データ分析リンク</strong> → データ分析画面（SC-06）</li>
<li><strong>ログアウトリンク</strong> → ログイン画面（SC-01）</li>
</ul>
<hr>
<h3 id="sc-04-%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E8%A9%B3%E7%B4%B0%E7%94%BB%E9%9D%A2">SC-04: メニュー詳細画面</h3>
<h4 id="541-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.4.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/menus/&lt;id&gt;</code></li>
<li><strong>メソッド</strong>: GET</li>
<li><strong>認証</strong>: 必要</li>
<li><strong>目的</strong>: メニューの詳細情報と全レビューを表示する</li>
</ul>
<h4 id="542-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.4.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------------------+
|  学食メニュー満足度アプリ                              |
|  ログイン中: ユーザー名                                |
+------------------------------------------------------+
|  [メニュー一覧に戻る]                                  |
|                                                      |
|  唐揚げ定食                                           |
|                                                      |
|  カテゴリ: 定食                                       |
|  価格: 500円                                          |
|  説明: ジューシーな唐揚げの定食                        |
|  平均評価: 4.5 (10件)                                 |
|  味: 4.7 / 量: 4.3 / コスパ: 4.5                     |
|                                                      |
|  [レビューを投稿] または [レビューを編集]              |
|                                                      |
|  レビュー一覧                                         |
|  +------------------------------------------------+  |
|  |ユーザー|評価|味|量|コスパ|コメント  |日時        |  |
|  +------------------------------------------------+  |
|  |太郎    |5   |5 |4 |5    |美味しい  |2025-11-10 |  |
|  |花子    |4   |5 |4 |4    |良い      |2025-11-09 |  |
|  +------------------------------------------------+  |
|                                                      |
+------------------------------------------------------+
</div></code></pre>
<h4 id="543-%E8%A1%A8%E7%A4%BA%E9%A0%85%E7%9B%AE">5.4.3 表示項目</h4>
<p><strong>メニュー情報:</strong></p>
<table>
<thead>
<tr>
<th>項目</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>メニュー名</td>
<td>メニューの名前</td>
</tr>
<tr>
<td>カテゴリ</td>
<td>所属カテゴリ名</td>
</tr>
<tr>
<td>価格</td>
<td>価格（円）</td>
</tr>
<tr>
<td>説明</td>
<td>メニューの説明（あれば）</td>
</tr>
<tr>
<td>平均評価（総合）</td>
<td>レビューの総合評価の平均</td>
</tr>
<tr>
<td>レビュー数</td>
<td>レビューの件数</td>
</tr>
<tr>
<td>平均評価（味）</td>
<td>味の評価の平均（入力者のみ）</td>
</tr>
<tr>
<td>平均評価（量）</td>
<td>量の評価の平均（入力者のみ）</td>
</tr>
<tr>
<td>平均評価（コスパ）</td>
<td>コスパ評価の平均（入力者のみ）</td>
</tr>
</tbody>
</table>
<p><strong>レビュー一覧テーブル:</strong></p>
<table>
<thead>
<tr>
<th>カラム</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ユーザー名</td>
<td>レビュー投稿者</td>
</tr>
<tr>
<td>総合評価</td>
<td>1-5の評価</td>
</tr>
<tr>
<td>味</td>
<td>味の評価（未入力は「-」）</td>
</tr>
<tr>
<td>量</td>
<td>量の評価（未入力は「-」）</td>
</tr>
<tr>
<td>コスパ</td>
<td>コスパ評価（未入力は「-」）</td>
</tr>
<tr>
<td>コメント</td>
<td>レビューコメント（未入力は「-」）</td>
</tr>
<tr>
<td>投稿日時</td>
<td>レビュー投稿日時</td>
</tr>
</tbody>
</table>
<h4 id="544-%E5%8B%95%E4%BD%9C">5.4.4 動作</h4>
<ol>
<li>セッションから <code>user_id</code> を取得してログインチェック</li>
<li>URL パラメータから <code>menu_id</code> を取得</li>
<li>メニュー情報を取得（存在しない場合は404エラー）</li>
<li>該当メニューの全レビューを新しい順に取得</li>
<li>平均評価を計算（総合、味、量、コスパ）</li>
<li>ログインユーザーが既にレビュー済みかチェック</li>
<li>データを画面に表示</li>
</ol>
<h4 id="545-%E8%A8%88%E7%AE%97%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF">5.4.5 計算ロジック</h4>
<p><strong>詳細評価の平均:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 味の平均（値がある場合のみ）</span>
reviews_with_taste = [r <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> reviews <span class="hljs-keyword">if</span> r.taste_rating]
<span class="hljs-keyword">if</span> reviews_with_taste:
    avg_taste = sum(r.taste_rating <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> reviews_with_taste) / len(reviews_with_taste)
<span class="hljs-keyword">else</span>:
    avg_taste = <span class="hljs-number">0</span>
</div></code></pre>
<h4 id="546-%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90">5.4.6 条件分岐</h4>
<ul>
<li><strong>ユーザーが未レビュー</strong>: 「レビューを投稿」ボタンを表示</li>
<li><strong>ユーザーが既レビュー</strong>: 「レビューを編集」ボタンを表示</li>
</ul>
<h4 id="547-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.4.7 画面遷移</h4>
<ul>
<li><strong>メニュー一覧に戻る</strong> → メニュー一覧画面（SC-03）</li>
<li><strong>レビューを投稿/編集</strong> → レビュー投稿・編集画面（SC-05）</li>
</ul>
<hr>
<h3 id="sc-05-%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E6%8A%95%E7%A8%BF%E3%83%BB%E7%B7%A8%E9%9B%86%E7%94%BB%E9%9D%A2">SC-05: レビュー投稿・編集画面</h3>
<h4 id="551-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.5.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/menus/&lt;id&gt;/review</code></li>
<li><strong>メソッド</strong>: GET, POST</li>
<li><strong>認証</strong>: 必要</li>
<li><strong>目的</strong>: メニューに対するレビューを投稿または編集する</li>
</ul>
<h4 id="552-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.5.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------------------+
|  学食メニュー満足度アプリ                              |
|  ログイン中: ユーザー名                                |
+------------------------------------------------------+
|  [メニュー詳細に戻る]                                  |
|                                                      |
|  唐揚げ定食 - レビュー投稿                             |
|                                                      |
|  総合評価 (必須): [5 - 最高 ▼]                        |
|                                                      |
|  味の評価:       [選択しない ▼]                       |
|                                                      |
|  量の評価:       [選択しない ▼]                       |
|                                                      |
|  コスパの評価:   [選択しない ▼]                       |
|                                                      |
|  コメント:                                            |
|  +--------------------------------------+            |
|  |                                      |            |
|  |                                      |            |
|  +--------------------------------------+            |
|                                                      |
|           [ 投稿 ] または [ 更新 ]                   |
|                                                      |
+------------------------------------------------------+
</div></code></pre>
<h4 id="553-%E5%85%A5%E5%8A%9B%E9%A0%85%E7%9B%AE">5.5.3 入力項目</h4>
<table>
<thead>
<tr>
<th>項目名</th>
<th>必須</th>
<th>型</th>
<th>選択肢</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>rating</td>
<td>◯</td>
<td>select</td>
<td>1-5</td>
<td>総合評価</td>
</tr>
<tr>
<td>taste_rating</td>
<td>-</td>
<td>select</td>
<td>未選択、1-5</td>
<td>味の評価</td>
</tr>
<tr>
<td>volume_rating</td>
<td>-</td>
<td>select</td>
<td>未選択、1-5</td>
<td>量の評価</td>
</tr>
<tr>
<td>price_rating</td>
<td>-</td>
<td>select</td>
<td>未選択、1-5</td>
<td>コスパの評価</td>
</tr>
<tr>
<td>comment</td>
<td>-</td>
<td>textarea</td>
<td>-</td>
<td>コメント</td>
</tr>
</tbody>
</table>
<p><strong>評価の選択肢:</strong></p>
<ul>
<li><code>5 - 最高</code></li>
<li><code>4 - 良い</code></li>
<li><code>3 - 普通</code></li>
<li><code>2 - イマイチ</code></li>
<li><code>1 - 悪い</code></li>
</ul>
<h4 id="554-%E5%8B%95%E4%BD%9C">5.5.4 動作</h4>
<p><strong>GET:</strong></p>
<ol>
<li>セッションから <code>user_id</code> を取得してログインチェック</li>
<li>URL パラメータから <code>menu_id</code> を取得</li>
<li>メニュー情報を取得</li>
<li>既存レビューをチェック</li>
<li>既存レビューがあればフォームに値を設定（編集モード）</li>
<li>フォームを表示</li>
</ol>
<p><strong>POST:</strong></p>
<ol>
<li>フォームデータを受け取る</li>
<li>バリデーション（総合評価は必須、範囲チェック）</li>
<li>既存レビューの有無をチェック</li>
<li><strong>既存レビューがある場合:</strong>
<ul>
<li>レビューを更新（UPDATE）</li>
<li>メッセージ: 「レビューを更新しました」</li>
</ul>
</li>
<li><strong>既存レビューがない場合:</strong>
<ul>
<li>新規レビューを作成（INSERT）</li>
<li>メッセージ: 「レビューを投稿しました」</li>
</ul>
</li>
<li>メニュー詳細画面へリダイレクト</li>
</ol>
<h4 id="555-%E3%83%90%E3%83%AA%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">5.5.5 バリデーション</h4>
<table>
<thead>
<tr>
<th>項目</th>
<th>チェック内容</th>
<th>エラーメッセージ</th>
</tr>
</thead>
<tbody>
<tr>
<td>rating</td>
<td>必須チェック</td>
<td>「総合評価は必須です」</td>
</tr>
<tr>
<td>rating</td>
<td>範囲チェック（1-5）</td>
<td>「評価は1〜5の範囲で入力してください」</td>
</tr>
<tr>
<td>taste_rating</td>
<td>範囲チェック（1-5、NULL可）</td>
<td>「評価は1〜5の範囲で入力してください」</td>
</tr>
<tr>
<td>volume_rating</td>
<td>範囲チェック（1-5、NULL可）</td>
<td>「評価は1〜5の範囲で入力してください」</td>
</tr>
<tr>
<td>price_rating</td>
<td>範囲チェック（1-5、NULL可）</td>
<td>「評価は1〜5の範囲で入力してください」</td>
</tr>
</tbody>
</table>
<h4 id="556-%E3%83%93%E3%82%B8%E3%83%8D%E3%82%B9%E3%83%AB%E3%83%BC%E3%83%AB">5.5.6 ビジネスルール</h4>
<ul>
<li>1ユーザーは1メニューに対して1レビューまで</li>
<li>既にレビューが存在する場合は自動的に編集モードになる</li>
<li>総合評価は必須、その他の評価とコメントは任意</li>
<li>空文字のコメントは NULL として保存</li>
</ul>
<h4 id="557-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.5.7 画面遷移</h4>
<ul>
<li><strong>メニュー詳細に戻る</strong> → メニュー詳細画面（SC-04）</li>
<li><strong>投稿/更新完了</strong> → メニュー詳細画面（SC-04）</li>
</ul>
<hr>
<h3 id="sc-06-%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90%E7%94%BB%E9%9D%A2">SC-06: データ分析画面</h3>
<h4 id="561-%E7%94%BB%E9%9D%A2%E6%A6%82%E8%A6%81">5.6.1 画面概要</h4>
<ul>
<li><strong>URL</strong>: <code>/analysis</code></li>
<li><strong>メソッド</strong>: GET</li>
<li><strong>認証</strong>: 必要</li>
<li><strong>目的</strong>: レビューデータを可視化し、統計情報を提供する</li>
</ul>
<h4 id="562-%E7%94%BB%E9%9D%A2%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">5.6.2 画面レイアウト</h4>
<pre class="hljs"><code><div>+------------------------------------------------------+
|  学食メニュー満足度アプリ                              |
|  ログイン中: ユーザー名                                |
+------------------------------------------------------+
|  [メニュー一覧] [データ分析] [ログアウト]              |
+------------------------------------------------------+
|  データ分析ダッシュボード                              |
|                                                      |
|  [メニュー一覧に戻る]                                  |
|                                                      |
|  +------------------------------------------------+  |
|  | 話題メニュー TOP10                             |  |
|  |                                                |  |
|  |  唐揚げ定食     ████████████ 15件             |  |
|  |  カレーライス   ██████████ 12件               |  |
|  |  ラーメン       ████████ 10件                 |  |
|  |  ...                                           |  |
|  |                                                |  |
|  +------------------------------------------------+  |
|                                                      |
+------------------------------------------------------+
</div></code></pre>
<h4 id="563-%E8%A1%A8%E7%A4%BA%E9%A0%85%E7%9B%AE">5.6.3 表示項目</h4>
<p><strong>グラフ:</strong></p>
<ol>
<li><strong>話題メニュー TOP10（横棒グラフ）</strong>
<ul>
<li>レビュー数が多いメニューをランキング形式で表示</li>
<li>X軸: レビュー数</li>
<li>Y軸: メニュー名</li>
</ul>
</li>
</ol>
<h4 id="564-%E5%8B%95%E4%BD%9C">5.6.4 動作</h4>
<ol>
<li>セッションから <code>user_id</code> を取得してログインチェック</li>
<li>全レビューデータを取得</li>
<li>レビューが0件の場合は「レビューデータがまだありません」と表示</li>
<li>レビューデータを Pandas DataFrame に変換</li>
<li>各種グラフを生成</li>
<li>グラフを Base64 エンコードして HTML に埋め込み</li>
<li>画面に表示</li>
</ol>
<h4 id="565-%E3%83%87%E3%83%BC%E3%82%BF%E5%87%A6%E7%90%86%E3%83%95%E3%83%AD%E3%83%BC">5.6.5 データ処理フロー</h4>
<pre><code class="language-mermaid"><div class="mermaid">flowchart LR
    A[レビューデータ取得] --> B[DataFrame変換]
    B --> C[データ集計]
    C --> D[グラフ生成]
    D --> E[Base64エンコード]
    E --> F[HTML埋め込み]
    F --> G[画面表示]
</div></code></pre>
<h4 id="566-%E6%8A%80%E8%A1%93%E8%A9%B3%E7%B4%B0">5.6.6 技術詳細</h4>
<p><strong>使用ライブラリ:</strong></p>
<ul>
<li><code>pandas</code>: データ処理</li>
<li><code>matplotlib</code>: グラフ生成</li>
<li><code>base64</code>: 画像エンコード</li>
</ul>
<p><strong>グラフ生成プロセス:</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. データ集計</span>
menu_counts = df[<span class="hljs-string">'menu_name'</span>].value_counts().head(<span class="hljs-number">10</span>)

<span class="hljs-comment"># 2. グラフ作成</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
menu_counts.plot(kind=<span class="hljs-string">'barh'</span>, ax=ax, color=<span class="hljs-string">'lightgreen'</span>)

<span class="hljs-comment"># 3. Base64エンコード</span>
buf = io.BytesIO()
fig.savefig(buf, format=<span class="hljs-string">'png'</span>, bbox_inches=<span class="hljs-string">'tight'</span>)
img_base64 = base64.b64encode(buf.read()).decode(<span class="hljs-string">'utf-8'</span>)

<span class="hljs-comment"># 4. HTMLに埋め込み</span>
&lt;img src=<span class="hljs-string">"data:image/png;base64,{{ img_base64 }}"</span> alt=<span class="hljs-string">"話題メニュー"</span>&gt;
</div></code></pre>
<h4 id="567-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB">5.6.7 画面遷移</h4>
<ul>
<li><strong>メニュー一覧に戻る</strong> → メニュー一覧画面（SC-03）</li>
<li><strong>ログアウト</strong> → ログイン画面（SC-01）</li>
</ul>
<hr>
<h2 id="6-%E5%85%B1%E9%80%9A%E4%BB%95%E6%A7%98">6. 共通仕様</h2>
<h3 id="61-%E8%AA%8D%E8%A8%BC%E3%83%BB%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86">6.1 認証・セッション管理</h3>
<h4 id="611-%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3">6.1.1 セッション</h4>
<ul>
<li>Flask のセッション機能を使用</li>
<li>セッションキーは <code>user_id</code></li>
<li>ログイン時にセッションに保存、ログアウト時に削除</li>
</ul>
<h4 id="612-%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF">6.1.2 ログインチェック</h4>
<p>認証が必要な画面では以下のチェックを実行:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">if</span> <span class="hljs-string">'user_id'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> session:
    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">'auth.login'</span>))
</div></code></pre>
<p>対象画面:</p>
<ul>
<li>SC-03: メニュー一覧画面</li>
<li>SC-04: メニュー詳細画面</li>
<li>SC-05: レビュー投稿・編集画面</li>
<li>SC-06: データ分析画面</li>
</ul>
<h3 id="62-%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">6.2 ナビゲーション</h3>
<h4 id="621-%E5%85%B1%E9%80%9A%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E8%AA%8D%E8%A8%BC%E5%BE%8C">6.2.1 共通ナビゲーション（認証後）</h4>
<p>すべての認証後画面に表示:</p>
<pre class="hljs"><code><div>[メニュー一覧] [データ分析] [ログアウト]
</div></code></pre>
<h4 id="622-%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E5%90%8D%E8%A1%A8%E7%A4%BA">6.2.2 ユーザー名表示</h4>
<p>ログイン中のユーザー名を画面上部に表示:</p>
<pre class="hljs"><code><div>ログイン中: {username}
</div></code></pre>
<h3 id="63-%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E8%A1%A8%E7%A4%BA">6.3 メッセージ表示</h3>
<h4 id="631-%E3%83%95%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8">6.3.1 フラッシュメッセージ</h4>
<p>Flask の <code>flash()</code> 機能を使用してユーザーにメッセージを表示。</p>
<p><strong>成功メッセージ:</strong></p>
<ul>
<li>「登録が完了しました。ログインしてください」</li>
<li>「ログインしました」</li>
<li>「レビューを投稿しました」</li>
<li>「レビューを更新しました」</li>
<li>「ログアウトしました」</li>
</ul>
<p><strong>エラーメッセージ:</strong></p>
<ul>
<li>「全ての項目を入力してください」</li>
<li>「そのユーザー名は既に使用されています」</li>
<li>「ユーザー名またはパスワードが正しくありません」</li>
<li>「評価は1〜5の範囲で入力してください」</li>
</ul>
<h4 id="632-%E8%A1%A8%E7%A4%BA%E4%BD%8D%E7%BD%AE">6.3.2 表示位置</h4>
<p>base.html で全画面共通の表示エリアを定義:</p>
<pre class="hljs"><code><div>{% with messages = get_flashed_messages() %}
  {% if messages %}
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flash-messages"</span>&gt;</span>
      {% for message in messages %}
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {% endfor %}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  {% endif %}
{% endwith %}
</div></code></pre>
<h3 id="64-%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0">6.4 エラーハンドリング</h3>
<h4 id="641-404-%E3%82%A8%E3%83%A9%E3%83%BC">6.4.1 404 エラー</h4>
<p>存在しないメニューにアクセスした場合:</p>
<pre class="hljs"><code><div>menu = Menu.query.get_or_404(id)
</div></code></pre>
<h4 id="642-%E8%AA%8D%E8%A8%BC%E3%82%A8%E3%83%A9%E3%83%BC">6.4.2 認証エラー</h4>
<p>未ログイン状態で認証が必要な画面にアクセス:</p>
<ul>
<li>ログイン画面へリダイレクト</li>
</ul>
<h2 id="7-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3">7. 画面遷移パターン</h2>
<h3 id="71-%E5%88%9D%E5%9B%9E%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E5%85%B8%E5%9E%8B%E7%9A%84%E3%81%AA%E3%83%95%E3%83%AD%E3%83%BC">7.1 初回ユーザーの典型的なフロー</h3>
<pre><code class="language-mermaid"><div class="mermaid">sequenceDiagram
    actor User as ユーザー
    participant Login as ログイン画面
    participant Register as 登録画面
    participant MenuList as メニュー一覧
    participant MenuDetail as メニュー詳細
    participant Review as レビュー投稿
    
    User->>Login: アクセス
    Login->>Register: 「登録」クリック
    User->>Register: ユーザー名・パスワード入力
    Register->>Login: 登録完了
    User->>Login: ログイン
    Login->>MenuList: 認証成功
    User->>MenuDetail: メニュー選択
    MenuDetail->>Review: 「レビューを投稿」クリック
    User->>Review: 評価・コメント入力
    Review->>MenuDetail: 投稿完了
    User->>MenuList: 「一覧に戻る」クリック
</div></code></pre>
<h3 id="72-%E6%97%A2%E5%AD%98%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%AE%E5%85%B8%E5%9E%8B%E7%9A%84%E3%81%AA%E3%83%95%E3%83%AD%E3%83%BC">7.2 既存ユーザーの典型的なフロー</h3>
<pre><code class="language-mermaid"><div class="mermaid">sequenceDiagram
    actor User as ユーザー
    participant Login as ログイン画面
    participant MenuList as メニュー一覧
    participant MenuDetail as メニュー詳細
    participant Review as レビュー編集
    participant Analysis as データ分析
    
    User->>Login: ログイン
    Login->>MenuList: 認証成功
    User->>MenuDetail: メニュー選択
    MenuDetail->>Review: 「レビューを編集」クリック
    User->>Review: 評価を更新
    Review->>MenuDetail: 更新完了
    User->>MenuList: 一覧に戻る
    User->>Analysis: 「データ分析」クリック
    Analysis->>MenuList: 一覧に戻る
    User->>Login: ログアウト
</div></code></pre>
<hr>
<h2 id="8-uiux%E3%82%AC%E3%82%A4%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3">8. UI/UXガイドライン</h2>
<h3 id="81-%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB">8.1 ボタンスタイル</h3>
<table>
<thead>
<tr>
<th>ボタン種別</th>
<th>クラス名</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>プライマリ</td>
<td><code>.btn-primary</code></td>
<td>メインアクション（ログイン、登録、投稿等）</td>
</tr>
<tr>
<td>セカンダリ</td>
<td><code>.btn-secondary</code></td>
<td>サブアクション（キャンセル、戻る等）</td>
</tr>
<tr>
<td>リンク</td>
<td><code>&lt;a&gt;</code></td>
<td>画面遷移（詳細、編集等）</td>
</tr>
</tbody>
</table>
<h3 id="82-%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB">8.2 テーブルスタイル</h3>
<ul>
<li>境界線: <code>border=&quot;1&quot;</code> （シンプルな枠線）</li>
<li>ヘッダー: <code>&lt;thead&gt;</code> で定義</li>
<li>データ行: <code>&lt;tbody&gt;</code> で定義</li>
</ul>
<h3 id="83-%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">8.3 フォームレイアウト</h3>
<ul>
<li>テーブルレイアウトで整列</li>
<li>ラベル: 左側セル（<code>&lt;th&gt;</code>）</li>
<li>入力欄: 右側セル（<code>&lt;td&gt;</code>）</li>
</ul>
<h3 id="84-%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0">8.4 カラースキーム</h3>
<ul>
<li>背景色: 白</li>
<li>テキスト: 黒</li>
<li>リンク: 青</li>
<li>ボタン: システム標準（ブラウザ依存）</li>
</ul>
<h3 id="85-%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88">8.5 フォント</h3>
<ul>
<li>日本語: システムフォント</li>
<li>グラフ: MS Gothic / Yu Gothic / Meiryo</li>
</ul>
<hr>
<h2 id="9-%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B7%E3%83%93%E3%83%AA%E3%83%86%E3%82%A3">9. アクセシビリティ</h2>
<h3 id="91-%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0">9.1 フォーム</h3>
<ul>
<li>すべての入力欄に <code>&lt;label&gt;</code> を設定</li>
<li>必須項目には <code>required</code> 属性を設定</li>
<li>パスワード入力は <code>type=&quot;password&quot;</code> で非表示</li>
</ul>
<h3 id="92-%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8">9.2 エラーメッセージ</h3>
<ul>
<li>フラッシュメッセージで明確に表示</li>
<li>ユーザーが理解しやすい日本語で記述</li>
</ul>
<h3 id="93-%E3%83%8A%E3%83%93%E3%82%B2%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3">9.3 ナビゲーション</h3>
<ul>
<li>画面遷移リンクを明確に配置</li>
<li>「戻る」リンクを提供</li>
</ul>
<hr>

</body>
</html>
